<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨è–¦é£›ä¾†ç™¼</title>
    <!-- å¼•å…¥æœ€æ–°ç‰ˆ LIFF SDK -->
    <script src="https://static.line-scdn.net"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
            text-align: center; 
            padding: 50px 20px; 
            background-color: #f8f9fa;
        }
        .container { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { color: #333; margin-bottom: 10px; }
        p { color: #666; margin-bottom: 30px; }
        .btn { 
            background: #06C755; /* LINE å®˜æ–¹ç¶ è‰² */
            color: white; 
            padding: 16px; 
            border-radius: 12px; 
            font-weight: bold; 
            font-size: 18px; 
            width: 100%; 
            border: none; 
            cursor: pointer;
            transition: background 0.3s;
        }
        .btn:active { background: #05a346; }
        .loading { display: none; color: #999; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸ€„ï¸ æ¨è–¦é£›ä¾†ç™¼ ğŸ€„ï¸</h2>
        <p>å°‡æˆ‘å€‘çš„æœå‹™åˆ†äº«çµ¦æ‚¨çš„ LINE å¥½å‹</p>
        
        <button class="btn" id="shareBtn">ç«‹å³æ¨è–¦çµ¦å¥½å‹</button>
        <div id="status" class="loading">åˆå§‹åŒ–ä¸­...</div>
    </div>

    <script>
        const LIFF_ID = "2009263508-0qU0PuCk"; // æ‚¨çš„ LIFF ID
        const LINE_ID = "@636gbfpe";          // æ‚¨çš„æ©Ÿå™¨äºº ID

        async function main() {
            const statusLabel = document.getElementById('status');
            try {
                // 1. åˆå§‹åŒ– LIFF
                await liff.init({ liffId: LIFF_ID });

                // 2. åˆ¤æ–·æ˜¯å¦å·²ç™»å…¥ï¼ˆå¦‚æœæ˜¯å¾ LINE é–‹å•Ÿé€šå¸¸æœƒè‡ªå‹•ç™»å…¥ï¼‰
                if (!liff.isLoggedIn()) {
                    // å¦‚æœåœ¨ä¸€èˆ¬ç€è¦½å™¨é–‹å•Ÿï¼Œå¼•å°ç™»å…¥
                    // liff.login(); 
                }

                document.getElementById('shareBtn').addEventListener('click', () => {
                    const recommendUrl = `https://line.me{LINE_ID}`;
                    
                    // 3. ä½¿ç”¨ liff.openWindow å„ªåŒ–è·³è½‰
                    // é€™ç¨®æ–¹å¼åœ¨ LINE å…§éƒ¨ç›¸å®¹æ€§æœ€é«˜ï¼Œè¼ƒä¸æœƒè§¸ç™¼ 400 éŒ¯èª¤
                    if (liff.isInClient()) {
                        liff.openWindow({
                            url: recommendUrl,
                            external: true // ä½¿ç”¨å¤–éƒ¨ç€è¦½å™¨æˆ– LINE å…§å»ºåŠŸèƒ½é–‹å•Ÿ
                        });
                    } else {
                        // å¦‚æœæ˜¯åœ¨é›»è…¦ç‰ˆæˆ–ä¸€èˆ¬ç€è¦½å™¨
                        window.location.href = recommendUrl;
                    }
                });

            } catch (err) {
                console.error(err);
                alert("å•Ÿå‹•å¤±æ•—: " + err.message);
            }
        }

        main();
    </script>
</body>
</html>
